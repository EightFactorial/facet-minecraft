[advisories]
db-path = "~/.cargo/advisory-db"
db-urls = ["https://github.com/rustsec/advisory-db"]
ignore = ["RUSTSEC-2025-0057"]
version = 2

[licenses]
allow = ["Apache-2.0", "MIT", "Unicode-3.0"]

[bans]
external-default-features = "allow"
highlight = "all"
multiple-versions = "warn"
skip-tree = []
wildcards = "deny"

[bans.build]
enable-builtin-globs = true
executables = "deny"
include-archives = true
include-dependencies = true
include-workspace = true
interpreted = "warn"

[bans.workspace-dependencies]
duplicates = "deny"
include-path-dependencies = false
unused = "allow"

[sources]
allow-registry = ["https://github.com/rust-lang/crates.io-index"]
unknown-git = "deny"
unknown-registry = "deny"

# --- Duplicate Exceptions ---

# --- Executable Exceptions ---

[[bans.build.bypass]]
name = "autocfg"
allow-globs = ["tests/*"]

[[bans.build.bypass]]
name = "libc"
allow = [
  { path = "cherry-pick-stable.sh", checksum = "c7d95e3cf2624115219edc224e3ee56484d3f05f8e157f92d5a0e3a735e51640" },
]

[[bans.build.bypass]]
name = "shadow_counted"
allow-globs = [".cehgit.d/*"]
allow = [ { path = ".cehgit" } ]

[[bans.build.bypass]]
name = "wasi"
allow = [
  { path = "ci/regenerate.sh", checksum = "5dae9a1865118825e40e8efbcff0b6313089e3f7f1f954d007d3296700afa827" },
  { path = "ci/vendor-wit.sh", checksum = "462d615802b873da11f56dd036062e2da07c302ec49dec7239db515f066768d7" },
]

[[bans.build.bypass]]
name = "windows_aarch64_gnullvm"
allow-globs = ["lib/libwindows.*.a"]
[[bans.build.bypass]]
name = "windows_aarch64_msvc"
allow-globs = ["lib/windows.*.lib"]
[[bans.build.bypass]]
name = "windows_i686_gnu"
allow-globs = ["lib/libwindows.*.a"]
[[bans.build.bypass]]
name = "windows_i686_gnullvm"
allow-globs = ["lib/libwindows.*.a"]
[[bans.build.bypass]]
name = "windows_i686_msvc"
allow-globs = ["lib/windows.*.lib"]
[[bans.build.bypass]]
name = "windows_x86_64_gnu"
allow-globs = ["lib/libwindows.*.a"]
[[bans.build.bypass]]
name = "windows_x86_64_gnullvm"
allow-globs = ["lib/libwindows.*.a"]
[[bans.build.bypass]]
name = "windows_x86_64_msvc"
allow-globs = ["lib/windows.*.lib"]

[[bans.build.bypass]]
name = "wit-bindgen"
allow-globs = ["src/rt/libwit_bindgen_*.a"]

[[bans.build.bypass]]
name = "zerocopy"
allow-globs = ["ci/*", "githooks/*"]
allow = [
  { path = "cargo.sh", checksum = "f1899964e521b76e650470c508319a6738c4fe296e75908b628d35e965598f4a" },
  { path = "win-cargo.bat", checksum = "dbde5af501630f6d14a0681d27f30ef2ffaeb1753d14be2f7cb1a7f285458c07" }
]
